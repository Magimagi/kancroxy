(function(){var $,clipboard,gui;gui=window.require("nw.gui");clipboard=gui.Clipboard.get();$=global.settingsWin.window.$;exports.init=function(){var currentShowDeck,currentTag,isValidIp,isValidPort;currentTag=0;currentShowDeck=1;$("#proxy-tabs").tabs({noSwipe:1});isValidIp=function(ip){var match;match=ip.match(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/);if(match&&0<=match[1]&&match[1]<256&&0<=match[2]&&match[2]<256&&0<=match[3]&&match[3]<256&&0<=match[4]&&match[4]<256){return true}else{return false}};isValidPort=function(port){var match;match=port.match(/^(\d+)$/);if(match&&0<match[1]&&match[1]<1e5){return true}else{return false}};$("#proxy-tabs").find("a").on("opened.tabs.amui",function(e){switch($(this).text()[0]){case"S":if($(this).text()[1]==="h"){return $("#current-proxy").text("shadowsocks")}else{return $("#current-proxy").text("socks")}break;case"H":return $("#current-proxy").text("http");default:return $("#current-proxy").text("none")}});$("#shadowsocks-server-ip").bind("input",function(){if(isValidIp($("#shadowsocks-server-ip")[0].value)){return $("#shadowsocks-server-ip-container").attr("class","am-form-success")}else{return $("#shadowsocks-server-ip-container").attr("class","am-form-error")}});$("#shadowsocks-server-port").bind("input",function(){if(isValidPort($("#shadowsocks-server-port")[0].value)){return $("#shadowsocks-server-port-container").attr("class","am-form-success")}else{return $("#shadowsocks-server-port-container").attr("class","am-form-error")}});$("#httpproxy-ip").bind("input",function(){if(isValidIp($("#httpproxy-ip")[0].value)){return $("#httpproxy-ip-container").attr("class","am-form-success")}else{return $("#httpproxy-ip-container").attr("class","am-form-error")}});$("#httpproxy-port").bind("input",function(){if(isValidPort($("#httpproxy-port")[0].value)){return $("#httpproxy-port-container").attr("class","am-form-success")}else{return $("#httpproxy-port-container").attr("class","am-form-error")}});$("#socksproxy-ip").bind("input",function(){if(isValidIp($("#socksproxy-ip")[0].value)){return $("#socksproxy-ip-container").attr("class","am-form-success")}else{return $("#socksproxy-ip-container").attr("class","am-form-error")}});$("#socksproxy-port").bind("input",function(){if(isValidPort($("#socksproxy-port")[0].value)){return $("#socksproxy-port-container").attr("class","am-form-success")}else{return $("#socksproxy-port-container").attr("class","am-form-error")}});$("#save-proxy-settings").click(function(){return window.require("./modules/settingsUi").saveConfig()});$("#pac-path").click(function(){clipboard.set($("#pac-path")[0].value,"text");return window.require("./modules/settingsUi").showModal("PAC文件路径","路径已经被复制到系统剪切板")});$("#about-weibo").click(function(){return gui.Shell.openExternal("http://weibo.com/maginya")});$("#about-github").click(function(){return gui.Shell.openExternal("https://github.com/nyagi/poi")});$("#about-license").click(function(){return gui.Shell.openExternal("https://github.com/nyagi/poi/blob/master/LICENSE")});return $("#about-nw").click(function(){return gui.Shell.openExternal("https://github.com/rogerwang/node-webkit")})}}).call(this);