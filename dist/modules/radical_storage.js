(function(){var fs,mime,querystring,storagePath,url,util;fs=require("fs");url=require("url");mime=require("mime");util=require("./util");querystring=require("querystring");storagePath=global.appDataPath+"/cache";exports.loadStorageFile=function(req,res){var data,filePath,parsed;parsed=url.parse(req.url);filePath=""+storagePath+parsed.pathname;if(!fs.existsSync(filePath)){return false}util.log("读取自定义缓存 "+filePath);data=fs.readFileSync(filePath);res.writeHead(200,{"Content-Type":mime.lookup(filePath),"Content-Length":data.length});res.write(data);res.end();return true}}).call(this);